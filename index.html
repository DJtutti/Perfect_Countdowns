<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <title>Perfect Countdowns   private</title>
  <style>
    :root {
      --bg-light: #ffffff;
      --bg-dark: #222;
      --text-dark: #000000;
      --text-light: #ffffff;
      --accent-gray: #888;
      --btn-border-color: #fff;
    }

    body {
      font-family: sans-serif;
      padding: 20px 20px 40px 20px;
      background: var(--bg-light);
      color: var(--text-dark);
      transition: background 0.3s, color 0.3s;
    }

    body.dark-mode {
      background: var(--bg-dark);
      color: var(--text-light);
    }

    #topBar {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 15px;
      flex-wrap: nowrap;
    }

    #countdownForm {
      display: flex;
      gap: 10px;
      align-items: center;
      margin: 0;
      flex-wrap: nowrap;
      margin-right: auto;
    }

    #countdownForm input,
    #countdownForm button {
      margin: 0;
      padding: 8px;
      font-size: 1em;
    }

    #color,
    #textColor {
      width: 50px;
      height: 40px;
      padding: 0;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    #controls {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }

    #controls button {
      padding: 5px 10px;
      font-size: 1em;
      cursor: pointer;
      background: none;
      border: 2px solid var(--btn-border-color);
      border-radius: 8px;
      color: inherit;
      transition: background 0.3s, color 0.3s;
    }

    #controls button:hover {
      background: var(--btn-border-color);
      color: var(--bg-dark);
    }

    #modeToggle {
      position: relative;
      left: -85%;
      top: 17px;
      transform: translateY(-50%);
      padding: 5px 8px;
      border: 2px solid var(--btn-border-color);
      border-radius: 8px;
      background: none;
      cursor: pointer;
      color: inherit;
      transition: background 0.3s, color 0.3s;
    }

    #modeToggle:hover {
      background: var(--btn-border-color);
      color: var(--bg-dark);
    }

    .countdown-container {
      display: grid;
      gap: 20px;
      margin-top: 20px;
    }

    .countdown {
      padding: 20px;
      border-radius: 10px;
      position: relative;
      box-shadow: 0 0 8px #aaa;
      color: #fff;
    }

    .countdown .title {
      font-size: 1.4em;
      font-weight: bold;
      text-align: center;
      margin-bottom: 8px;
    }

    .countdown .time {
      font-size: 1.6em;
      font-weight: 600;
      text-align: center;
      background: rgba(255, 255, 255, 0.2);
      padding: 5px 10px;
      border-radius: 6px;
      text-shadow: 0 1px 2px #00000066;
    }

    .countdown .time span.num {
      font-weight: 700;
      font-size: 1.7em;
    }

    .countdown .time span.unit {
      opacity: 0.6;
      font-size: 0.9em;
      margin-right: 6px;
    }

    .countdown button {
      position: absolute;
      top: 10px;
      background: rgba(255, 255, 255, 0.7);
      border: none;
      border-radius: 4px;
      cursor: pointer;
      padding: 4px 8px;
    }

    .remove-btn {
      right: 10px;
    }

    .edit-btn {
      right: 60px;
    }

    .hidden {
      display: none;
    }

    .cols-1 {
      grid-template-columns: 1fr;
    }

    .cols-2 {
      grid-template-columns: repeat(2, 1fr);
    }

    .cols-3 {
      grid-template-columns: repeat(3, 1fr);
    }

    .cols-4 {
      grid-template-columns: repeat(4, 1fr);
    }

    .cols-5 {
      grid-template-columns: repeat(5, 1fr);
    }
  </style>
</head>
<body>
  <div id="topBar">
    <form id="countdownForm">
      <input type="text" id="title" placeholder="Event Name" required />
      <input type="datetime-local" id="date" required />
      <input type="color" id="color" value="#007BFF" />
      <input type="color" id="textColor" value="#ffffff" />
      <button type="submit">ADD</button>
    </form>

    <div id="controls">
      <button id="modeToggle" onclick="toggleMode()">☀</button>
      <button onclick="setColumns(1)">☰</button>
      <button onclick="setColumns(2)">2</button>
      <button onclick="setColumns(3)">3</button>
      <button onclick="setColumns(4)">4</button>
      <button onclick="setColumns(5)">☷</button>
    </div>
  </div>

  <div id="countdownContainer" class="countdown-container cols-3"></div>

  <script>
    const form = document.getElementById('countdownForm');
    const container = document.getElementById('countdownContainer');
    const modeToggle = document.getElementById('modeToggle');

    const STORAGE_KEY = "countdowns_private";
    let countdowns = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
    let columnCount = 3;
    let savedColumns = localStorage.getItem("countdown_columns_private");
    if (savedColumns) {
      columnCount = parseInt(savedColumns);
      container.className = `countdown-container cols-${columnCount}`;
    }

    function saveCountdowns() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(countdowns));
    }

    function setColumns(n) {
      columnCount = n;
      container.className = `countdown-container cols-${n}`;
      localStorage.setItem("countdown_columns_private", n);
    }

    function removeCountdown(index) {
      countdowns.splice(index, 1);
      saveCountdowns();
      updateCountdowns();
    }

    function editCountdown(index) {
      const cd = countdowns[index];
      const newTitle = prompt("New name:", cd.title) || cd.title;
      const newDate = prompt("New date (YYYY-MM-DD HH:MM):", cd.date.replace("T", " ")) || cd.date;
      const newColor = prompt("New color (#hex):", cd.color) || cd.color;
      const newTextColor = prompt("New text color (#hex):", cd.textColor || '#ffffff') || cd.textColor;

      countdowns[index] = {
        title: newTitle,
        date: newDate,
        color: newColor,
        textColor: newTextColor
      };
      saveCountdowns();
      updateCountdowns();
    }

    function formatTime(diff) {
  if (diff <= 0) return 'Finished!';

  // Bases de conversão
  const msPerSecond = 1000;
  const msPerMinute = 60 * msPerSecond;
  const msPerHour   = 60 * msPerMinute;
  const msPerDay    = 24 * msPerHour;
  const msPerMonth  = 30.44 * msPerDay;
  const msPerYear   = 365.25 * msPerDay;

  // Flags de visibilidade baseado no diff total
  const showSeconds = diff <= 36 * msPerHour;
  const showMinutes = diff >= 15 * msPerSecond && diff <= 30.44 * msPerDay;
  const showHours   = diff >= 30 * msPerMinute && diff <= 9 * msPerMonth;
  const showDays    = diff >= 18 * msPerHour && diff <= 5 * msPerYear;
  const showMonths  = diff >= 30.44 * msPerDay && diff <= 2.5 * 10 * 12 * msPerMonth;
  const showYears   = diff >= 18 * msPerMonth;

  // Totais acumulados
  const totalSeconds = Math.floor(diff / msPerSecond);
  const totalMinutes = Math.floor(diff / msPerMinute);
  const totalHours   = Math.floor(diff / msPerHour);
  const totalDays    = Math.floor(diff / msPerDay);
  const totalMonths  = Math.floor(diff / msPerMonth);
  const totalYears   = Math.floor(diff / msPerYear);

  let html = '';

  // Hierarquia e resto/total
  if (showYears)   html += `<span class="num">${totalYears}</span><span class="unit">a</span>`;
  if (showMonths)  html += `<span class="num">${showYears ? totalMonths % 12 : totalMonths}</span><span class="unit">M</span>`;
  if (showDays)    html += `<span class="num">${showMonths ? totalDays % 30 : totalDays}</span><span class="unit">d</span>`;
  if (showHours)   html += `<span class="num">${showDays ? totalHours % 24 : totalHours}</span><span class="unit">h</span>`;
  if (showMinutes) html += `<span class="num">${showHours ? totalMinutes % 60 : totalMinutes}</span><span class="unit">m</span>`;
  if (showSeconds) html += `<span class="num">${showMinutes ? totalSeconds % 60 : totalSeconds}</span><span class="unit">s</span>`;

  return html;
}




    function updateCountdowns() {
      container.innerHTML = '';
      const now = new Date();

      countdowns.forEach((cd, i) => {
        const finalTime = new Date(cd.date);
        const diff = finalTime - now;

        const div = document.createElement('div');
        div.className = 'countdown';
        div.style.background = cd.color || '#007BFF';
        div.style.color = cd.textColor || '#ffffff';

        div.innerHTML = `
          <button class="edit-btn" onclick="editCountdown(${i})">✏️</button>
          <button class="remove-btn" onclick="removeCountdown(${i})">❌</button>
          <div class="title">${cd.title}</div>
          <div class="time">${formatTime(diff)}</div>
        `;
        container.appendChild(div);
      });
    }

    form.addEventListener('submit', e => {
      e.preventDefault();
      const title = document.getElementById('title').value;
      const date = document.getElementById('date').value;
      const color = document.getElementById('color').value;
      const textColor = document.getElementById('textColor').value;
      countdowns.push({ title, date, color, textColor });
      saveCountdowns();
      updateCountdowns();
      form.reset();
    });

    function toggleMode() {
      document.body.classList.toggle('dark-mode');
      modeToggle.textContent = document.body.classList.contains('dark-mode') ? '☾' : '☀';
    }

    setInterval(updateCountdowns, 1000);
    updateCountdowns();
  </script>
</body>
</html>





